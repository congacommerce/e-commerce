<ng-container *ngIf="view$ | async as view; else loading">
  <div class="row mb-3">
    <div class="col-12">
      <apt-data-filter [type]="type" [filterList]="filterList" (filterListChange)="handleFilterListChange($event)">
      </apt-data-filter>
    </div>
  </div>
  <div class="row">
    <div class="col-12 d-flex summary">
      <div class="d-flex align-items-end">
        <span class="text-muted">{{'MY_ACCOUNT.QUOTE_DETAIL.TOTAL_QUOTES' | translate}}:</span>
        <h4 class="my-0 ml-2">{{view?.total}}</h4>
      </div>
      <div class="d-flex align-items-end">
        <span class="text-muted">{{'COMMON.AMOUNT' | translate}}:</span>
        <h4 class="my-0 ml-2">{{view?.totalAmount | localCurrency | async}}</h4>
      </div>
    </div>
  </div>
  <div class="row mt-3">
    <div class="col-12 col-md-6">
      <div class="card-header border">
        <strong class="text-uppercase d-block">{{'MY_ACCOUNT.QUOTE_DETAIL.QUOTES_BY_STATUS' | translate}}</strong>
      </div>
      <div class="card-body border border-top-0">
        <apt-chart [data]="view.quotesByStatus" [type]="'bar'" [amountsByStatus]="view.amountsByStatus" [showLegend]="false"></apt-chart>
      </div>
    </div>
    <div class="col-12 col-md-6">
      <div class="card-header border">
        <strong class="text-uppercase d-block">{{'MY_ACCOUNT.QUOTE_DETAIL.QUOTES_BY_DUE_DATE' | translate}}</strong>
      </div>
      <div class="card-body border border-top-0">
        <apt-chart [data]="view.quotesByDueDate" [type]="'doughnut'" [legendPosition]="'right'" [colorPalette]="colorPalette" [centerText]="view?.total"></apt-chart>
      </div>
    </div>
  </div>

  <div class="card p-0 mt-3">
    <apt-table [type]="type" [options]="view.tableOptions"></apt-table>
  </div>

</ng-container>

<ng-template #loading>
  <div class="d-flex justify-content-center py-5">
    <apt-spinner></apt-spinner>
  </div>
</ng-template>